<!-- Description header 
  -  Red * only display in edit mode indicating this is a required field
  -->
<div style="width: 100%;">
    <div style="display: table; margin-bottom: 1em;width:100%;">
        <div class="editable_container" style="width:100%;">
            <span *ngIf="mdupdsvc.isEditMode" style="color: rgb(173, 0, 0);margin-left: -12px;margin-right: 6px;">*</span>
            <!-- Not editing -->
            <div class="editable_field" style="width:100%;" *ngIf="!isEditing">
                <div *ngIf="isEmpty; else hasDescription">
                    <div class="nist-card" *ngIf="mdupdsvc.isEditMode" style="width:inherit;" [ngStyle]="mdupdsvc.getFieldStyle(fieldName)">
                        Click edit (pencil) button to add description.
                    </div>
                </div>
                <ng-template #hasDescription>
                    <div id="recordDescription" class="editable_field" style="max-width:calc(100% - 4em); white-space: pre-wrap" [ngStyle]="mdupdsvc.getFieldStyle(fieldName)" (click)="startEditing()">
                        {{description}}
                    </div>
                </ng-template>
            </div>

            <!-- Editing -->
            <div class="editable_field" style="width:100%;" *ngIf="isEditing">
                <textarea autocomplete="off" [(ngModel)]='description' (ngModelChange)="setBackground($event)" style="width: 100%;margin: 0px; padding: 0px;" [ngStyle]="{'background-color': backColor}" libTextareaAutoresize></textarea>
            </div>

            <!-- Control buttons -->
            <div class="editable_field" *ngIf="mdupdsvc.isEditMode" style="white-space: nowrap;">
                <!-- Edit button -->
                <button class="edit_button" type="button" (click)="startEditing()" *ngIf="!isEditing"
                    aria-label="edit button" ngbTooltip="edit keywords">
                    <i class="faa faa-pencil icon_enabled" data-toggle="tooltip" title="Edit keywords"></i>
                </button>
    
                <!-- Save button -->
                <button class="edit_button" type="button" (click)="onSave()" *ngIf="isEditing"
                aria-label="save button" ngbTooltip="Save changes">
                    <i class="faa faa-check icon_enabled" data-toggle="tooltip" title="Save keywords"></i>
                </button>
    
                <!-- Undo button -->
                <button class="edit_button" type="button" *ngIf="!isEditing"
                    (click)="undoEditing()" aria-label="undo button" ngbTooltip="Restore original keywords">
                    <i class="faa faa-undo" [ngClass]="{'icon_enabled': updated, 'icon_disabled':!updated }"
                        data-toggle="tooltip" title="Undo keyword changes"></i>
                </button>
    
                <!-- Cancel editing button -->
                <button class="edit_button" type="button" *ngIf="isEditing"
                (click)="cancelEditing()" aria-label="undo button" ngbTooltip="Cancel edit">
                    <i class="faa faa-remove" data-toggle="tooltip" title="Cancel editing"></i>
                </button>
            </div>
        </div>
    </div>
</div>
