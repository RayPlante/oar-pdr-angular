<div id="keyword" style="display: table; width: 100%;">
    <div class="editable_container" style="width: 100%;">
        <div class="editable_field" *ngIf="isEmpty; else hasKeyword">
            <div class="editable_field" *ngIf="mdupdsvc.isEditMode">
                <span *ngIf="mdupdsvc.isEditMode" style="color: rgb(173, 0, 0);margin-left: -12px;margin-right: 6px;">*</span><strong style="white-space: nowrap;margin-right: .5em;">Add subject keywords:</strong>
            </div>
        </div>
        <ng-template #hasKeyword>
            <div class="editable_field">
                <span *ngIf="mdupdsvc.isEditMode" style="color: rgb(173, 0, 0);margin-left: -12px;margin-right: 6px;">*</span><strong style="white-space: nowrap;margin-right: .5em;">Subject Keywords:</strong>                
            </div>
        </ng-template>

        <div class="editable_field" *ngIf="!mdupdsvc.isEditMode; else editmode" style="width: 100%;text-align: left;word-break: break-all;">
            <span class="keywords">
                <i>{{ keywords }}</i>
            </span>
        </div>
        <ng-template #editmode>
            <div class="editable_field" style="width:100%" >
                <!-- Editing: display edit text box-->
                <span *ngIf="isEditing; else nonEditing">
                    <!-- Content editable div to allow user to edit -->
                    <!-- <div> -->
                        <!-- <div tabindex="1" contenteditable [ceModel]="keywords" [ceDefault]="placeholder"
                            (ceChange)="onKeywordChange($event)" placeholder="placeholder"
                            id="content">
                        </div> -->
                        <textarea autocomplete="off" [(ngModel)]='keywords' (ngModelChange)="setBackground($event)" style="width: 100%;margin: 0px; padding: 0px;" [ngStyle]="{'background-color': backColor}" libTextareaAutoresize></textarea>
                        <!-- <div *ngIf="message" id="message">{{message}}</div> -->
                    <!-- </div> -->
                </span>
                <!-- nonEditing: only display text-->
                <ng-template #nonEditing>
                    <div class="keywords" (click)="startEditing()" style="width: 100%;word-break: break-all;" [ngStyle]="mdupdsvc.getFieldStyle(fieldName)">
                        {{ keywords }}
                    </div>
                </ng-template>
            </div>            
        </ng-template>
        
        <div class="editable_field" *ngIf="mdupdsvc.isEditMode" style="white-space: nowrap;">
            <!-- Edit button -->
            <button class="edit_button" type="button" (click)="startEditing()" *ngIf="!isEditing"
                aria-label="edit button" ngbTooltip="edit keywords">
                <i class="faa faa-pencil icon_enabled" data-toggle="tooltip" title="Edit keywords"></i>
            </button>

            <!-- Save button -->
            <button class="edit_button" type="button" (click)="onSave()" *ngIf="isEditing"
            aria-label="save button" ngbTooltip="Save changes">
                <i class="faa faa-check icon_enabled" data-toggle="tooltip" title="Save keywords"></i>
            </button>

            <!-- Undo button -->
            <button class="edit_button" type="button" *ngIf="!isEditing"
                (click)="undoEditing()" aria-label="undo button" ngbTooltip="Restore original keywords">
                <i class="faa faa-undo" [ngClass]="{'icon_enabled': updated, 'icon_disabled':!updated }"
                    data-toggle="tooltip" title="Undo keyword changes"></i>
            </button>

            <!-- Cancel editing button -->
            <button class="edit_button" type="button" *ngIf="isEditing"
            (click)="cancelEditing()" aria-label="undo button" ngbTooltip="Cancel edit">
                <i class="faa faa-remove" data-toggle="tooltip" title="Cancel editing"></i>
            </button>
        </div>
        <!-- <div class="editable_field" style="width:100%" [ngStyle]="mdupdsvc.getFieldStyle(fieldName)"
            (click)="startEditing()">
            <span class="keywords" contenteditable="false" *ngFor="let keyword of record['keyword']; let i =index">
                {{ keyword }}<span *ngIf="record['keyword'] && i < record['keyword'].length-1 ">,</span>
            </span> &nbsp; &nbsp;
            <lib-text-edit [textField]="record['keyword'].join()" [dragDropIcon]="false"
                [editButton]="false" [submitButton]="true" [restoreButton]="true"
                [disableControl]="false" [placeHolderText]="placeholder" [isNew]="false"
                [dataChanged]="mdupdsvc.fieldUpdated(fieldName)"
                (command_out)="onKeywordChange($event)">
            </lib-text-edit>
            
        </div>
        <div class="editable_field">
            <button class="edit_button" *ngIf="mdupdsvc.isEditMode" type="button" (click)="openModal()"
                aria-label="edit button">
                <i class="faa faa-pencil icon_enabled" data-toggle="tooltip" title="Edit keyword"></i>
            </button>
            <button class="edit_button" *ngIf="mdupdsvc.isEditMode" type="button" [disabled]="!updated"
                (click)="undoEditing()" aria-label="undo button">
                <i class="faa faa-undo" [ngClass]="{'icon_enabled': updated, 'icon_disabled':!updated }"
                    data-toggle="tooltip" title="Undo keyword"></i>
            </button>
        </div>

        <span *ngIf="mdupdsvc.isEditMode" style="color: rgb(173, 0, 0);margin-left: .5em;">*</span> -->
    </div>
</div>