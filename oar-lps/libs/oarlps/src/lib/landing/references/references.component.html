<div class="references" id="references">
    <!-- Edit mode -->
    <div *ngIf="mdupdsvc.isEditMode; else nonEdit">
        <div class="section-header">
            <h3><b>References</b></h3>
        </div>

        <div class="editable_container">
            <!-- <ng-template #hasReferences> -->
            <div class="editable_field" style="width: 100%;padding: 10px;" [ngStyle]="getStyle()">
                <div *ngIf="mdupdsvc.isEditMode" style="margin-bottom: 10px;">
                    Add references to papers and other datasets.
                </div>

                <div *ngFor="let ref of record['references']" class="ref-entry">
                    <span *ngIf="ref.location; else noreflink">
                        <span class="faa faa-external-link">&nbsp;</span>
                        <a href={{ref.location}} target="blank">{{ ref['citation'] }}</a>
                    </span>
                    <ng-template #noreflink>
                        <span >{{ ref['citation'] }}</span>
                    </ng-template>
                </div>
            </div>        
            <!-- </ng-template> -->
            
            <!-- Control buttons -->
            <div class="editable_field" *ngIf="mdupdsvc.isEditMode" style="white-space: nowrap;width: 1.65em;">
                <button class="edit_button" *ngIf="mdupdsvc.isEditMode" (click)="onEdit()" aria-label="edit button" [disabled]="isEditing">
                    <i [class]="editIconClass()"></i>
                </button>
            </div>
        </div>
    </div>
    <!-- Normal/preview mode -->
    <ng-template #nonEdit>
        <div *ngIf="hasDisplayableReferences()">
            <div class="section-header"><h3><b>References</b></h3></div>
            <div class="reference-text" [ngStyle]="mdupdsvc.getFieldStyle(fieldName)">
                <div style="margin: 0em 0em .5em 1em;" *ngFor="let ref of record['references']" class="ref-entry">
                    <span *ngIf="ref.location; else noreflink">
                        <span class="faa faa-external-link">&nbsp;</span>
                        <a href={{ref.location}} target="blank">{{ ref['citation'] }}</a>
                    </span>
                    <ng-template #noreflink>
                        <span >{{ ref['citation'] }}</span>
                    </ng-template>
                </div>
            </div>
        </div>
    </ng-template>
</div>

<div style="width: 100%;" *ngIf="mdupdsvc.isEditMode" [@editExpand]="editBlockStatus" [style.overflow] = "overflowStyle">
    <lib-ref-list [record]="record" [inBrowser]="inBrowser" (dataCommand)="onRefChange($event)"></lib-ref-list>
</div>


