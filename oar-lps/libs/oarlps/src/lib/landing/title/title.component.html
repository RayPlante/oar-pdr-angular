<div style="width: 100%;max-width: 100%;">
    <div style="display: table;" style="width: 100%;">
        <div class="editable_container" style="width: 100%;">
            <div class="editable_field" *ngIf="mdupdsvc.isEditMode">
                <span *ngIf="mdupdsvc.isEditMode" style="color: rgb(173, 0, 0);margin-left: -12px;margin-right: 6px;">*</span>
            </div>
            <div class="editable_field" *ngIf="!record['title']" [style.cursor]="mdupdsvc.isEditMode ? 'pointer' : 'default'">
                <span class="title">
                    <h2 [ngStyle]="mdupdsvc.getFieldStyle(fieldName)"><i style="color: #cccccc;">No title set</i></h2>
                </span>
            </div>
            <!-- <ng-template #hasTitle> -->
            <div class="editable_field" *ngIf="record['title']" style="width: 100%;">
                <div *ngIf="mdupdsvc.isEditMode && isEditing; else nonEditing" style="width: 100%; ">
                    <h2 style="width: 100%;">
                        <textarea autocomplete="off" [(ngModel)]='record.title' (ngModelChange)="setBackground($event)" [ngStyle]="{'background-color': backColor}" style="width: 100%;" libTextareaAutoresize></textarea>
                    </h2>
                </div>
                <!-- <ng-template #nonEditing> -->
                    <div style="width: 100%;" *ngIf="!mdupdsvc.isEditMode || !isEditing" [style.cursor]="mdupdsvc.isEditMode ? 'pointer' : 'default'" [ngStyle]="mdupdsvc.getFieldStyle(fieldName)">
                        <h2>{{record.title}}</h2>
                    </div>
                <!-- </ng-template> -->
            </div>
            <!-- </ng-template> -->

            <div class="editable_field" *ngIf="mdupdsvc.isEditMode" style="white-space: nowrap;">
                <!-- Edit button -->
                <button class="edit_button" type="button" (click)="startEditing()" *ngIf="!isEditing" aria-label="edit button" ngbTooltip="edit title">
                    <i class="faa faa-pencil icon_enabled" data-toggle="tooltip" title="Edit title"></i>
                </button>

                <!-- Save button -->
                <button class="edit_button" type="button" (click)="onSave()" *ngIf="isEditing"
                aria-label="save button" ngbTooltip="Save changes">
                    <i class="faa faa-check icon_enabled" data-toggle="tooltip" title="Save keywords"></i>
                </button>

                <!-- Undo button -->
                <button class="edit_button" type="button" [disabled]="!updated" *ngIf="!isEditing" 
                    (click)="undoEditing()" aria-label="undo button" ngbTooltip="Restore original title">
                    <i class="faa faa-undo" [ngClass]="{'icon_enabled': updated, 'icon_disabled': !updated }"
                        data-toggle="tooltip" title="Undo title"></i>
                </button>

                <!-- Cancel editing button -->
                <button class="edit_button" type="button" *ngIf="isEditing"
                (click)="cancelEditing()" aria-label="undo button" ngbTooltip="Cancel edit">
                    <i class="faa faa-remove" data-toggle="tooltip" title="Cancel editing"></i>
                </button>   
                
                <!-- <button class="edit_button" type="button" 
                (click)="test()" aria-label="undo button" ngbTooltip="Cancel edit">
                    <i class="faa faa-eye" data-toggle="tooltip" title="test"></i>
                </button>   -->
            </div>
        </div>
    </div>
</div>
